import{_ as y,j as g,k as w,g as k,h as V,l as S,r as t,i as U,w as n,o as B,b as o,d as i,m as T,n as l,q as $,s as m}from"./entry.057c6502.js";const A={__name:"login",setup(R){const d=g().public.backendURL,c=w(),p=k();V(()=>{p.setAppBarTitle("Bem-vindo de volta!")});const a=S({username:"",password:""});async function f(){try{const s=await $fetch(`${d}/user/token/`,{method:"POST",body:a});c.setToken(s);const e=await $fetch(`${d}/user/me/`,{headers:{Authorization:`Bearer ${s.access}`}});c.setUser(e),c.isAuthenticated=!0;const r=$().query.next;if(r)return m(r);m("/hymnary")}catch{alert("Usuário ou senha incorretos")}}return(s,e)=>{const r=t("v-card-title"),_=t("v-text-field"),v=t("v-btn"),x=t("v-form"),b=t("v-card-text"),h=t("v-card");return B(),U(h,{width:"400px",class:"pa-2 rounded-xl"},{default:n(()=>[o(r,null,{default:n(()=>[i("Entrar")]),_:1}),o(b,null,{default:n(()=>[o(x,{class:"d-flex flex-column align-center",onSubmit:T(f,["prevent"])},{default:n(()=>[o(_,{label:"Usuário",modelValue:l(a).username,"onUpdate:modelValue":e[0]||(e[0]=u=>l(a).username=u),type:"text"},null,8,["modelValue"]),o(_,{label:"Senha",modelValue:l(a).password,"onUpdate:modelValue":e[1]||(e[1]=u=>l(a).password=u),type:"password"},null,8,["modelValue"]),o(v,{type:"submit",color:"primary"},{default:n(()=>[i("Entrar")]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})}}},q=y(A,[["__scopeId","data-v-c598b330"]]);export{q as default};
