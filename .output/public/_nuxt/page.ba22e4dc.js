import{ai as s,K,f as h,aR as _,b3 as j,bI as R,v as S,ao as p,bJ as x,bK as b,bL as O,A as T,aB as w,bM as N,G as B,bN as I,bG as L}from"./entry.057c6502.js";function d(e){return e!==null&&typeof e=="object"}function y(e,a,t=".",o){if(!d(a))return y(e,{},t,o);const r=Object.assign({},a);for(const n in e){if(n==="__proto__"||n==="constructor")continue;const i=e[n];i!=null&&(o&&o(r,n,i,t)||(Array.isArray(i)&&Array.isArray(r[n])?r[n]=[...i,...r[n]]:d(i)&&d(r[n])?r[n]=y(i,r[n],(t?`${t}.`:"")+n.toString(),o):r[n]=i))}return r}function C(e){return(...a)=>a.reduce((t,o)=>y(t,o,"",e),{})}const H=C(),$=(e,a)=>a.path.replace(/(:\w+)\([^)]+\)/g,"$1").replace(/(:\w+)[?+*]/g,"$1").replace(/:\w+/g,t=>{var o;return((o=e.params[t.slice(1)])==null?void 0:o.toString())||""}),v=(e,a)=>{const t=e.route.matched.find(r=>{var n;return((n=r.components)==null?void 0:n.default)===e.Component.type}),o=a??(t==null?void 0:t.meta.key)??(t&&$(e.route,t));return typeof o=="function"?o(e.route):o},q=(e,a)=>({default:()=>e?s(K,e===!0?{}:e,a):a}),F=h({name:"RouteProvider",props:{vnode:{type:Object,required:!0},route:{type:Object,required:!0},vnodeRef:Object,renderKey:String,trackRootNodes:Boolean},setup(e){const a=e.renderKey,t=e.route,o={};for(const r in e.route)Object.defineProperty(o,r,{get:()=>a===e.renderKey?e.route[r]:t[r]});return _(R,j(o)),()=>s(e.vnode,{ref:e.vnodeRef})}}),V=h({name:"NuxtPage",inheritAttrs:!1,props:{name:{type:String},transition:{type:[Boolean,Object],default:void 0},keepalive:{type:[Boolean,Object],default:void 0},route:{type:Object},pageKey:{type:[Function,String],default:null}},setup(e,{attrs:a,expose:t}){const o=L(),r=S(),n=p(R,null);t({pageRef:r});const i=p(x,null);let c;const f=o.deferHydration();return()=>s(I,{name:e.name,route:e.route,...a},{default:u=>{const A=J(n,u.route,u.Component),g=n&&n.matched.length===u.route.matched.length;if(!u.Component)return c&&!g?c:void 0;if(c&&i&&!i.isCurrent(u.route))return c;if(A&&n&&(!i||i!=null&&i.isCurrent(n)))return g?c:null;const m=v(u,e.pageKey),l=!!(e.transition??u.route.meta.pageTransition??b),k=l&&D([e.transition,u.route.meta.pageTransition,b,{onAfterLeave:()=>{o.callHook("page:transition:finish",u.Component)}}].filter(Boolean));return c=O(B,l&&k,q(e.keepalive??u.route.meta.keepalive??N,s(T,{suspensible:!0,onPending:()=>o.callHook("page:start",u.Component),onResolve:()=>{w(()=>o.callHook("page:finish",u.Component).finally(f))}},{default:()=>s(F,{key:m,vnode:u.Component,route:u.route,renderKey:m,trackRootNodes:l,vnodeRef:r})}))).default(),c}})}});function G(e){return Array.isArray(e)?e:e?[e]:[]}function D(e){const a=e.map(t=>({...t,onAfterLeave:G(t.onAfterLeave)}));return H(...a)}function J(e,a,t){if(!e)return!1;const o=a.matched.findIndex(r=>{var n;return((n=r.components)==null?void 0:n.default)===(t==null?void 0:t.type)});return!o||o===-1?!1:a.matched.slice(0,o).some((r,n)=>{var i,c,f;return((i=r.components)==null?void 0:i.default)!==((f=(c=e.matched[n])==null?void 0:c.components)==null?void 0:f.default)})||t&&v({route:a,Component:t})!==v({route:e,Component:t})}export{V as _};
